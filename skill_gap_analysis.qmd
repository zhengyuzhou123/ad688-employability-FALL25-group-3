---
title: "Skill Analysis"
subtitle: "Skill Gap Analysis"
author:
  - name: "Bingrui Qiao"
  - name: "Zhengyu Zhou"
  - name: "Junhao Wang"
    affiliations: "Boston University"
bibliography: references.bib
csl: csl/econometrica.csl
format:
  html:
    toc: true
    number-sections: true
execute:
  echo: true
  eval: true
  freeze: false
  error: false
  cache: false
  enabled: !expr (os.getenv("CI", "false") != "true")
jupyter: python3
---
# Create a team-based skill dataframe
```{python}
import pandas as pd

skills_data = {
    "Name": ["Bingrui Qiao", "Zhengyu Zhou", "Junhao Wang"],
    "Python": [2, 2, 3],
    "SQL": [2, 2, 3],
    "Machine Learning": [1, 1, 1],
    "Cloud Computing": [2, 2, 3],
    "Docker": [1, 1, 1],
    "AWS": [2, 2, 2]
}

df_skills = pd.DataFrame(skills_data)
df_skills.set_index("Name", inplace=True)
df_skills
```
# Visualizing Skill Gaps
```{python}
import seaborn as sns
import matplotlib.pyplot as plt

#visual
sns.set_theme(style="whitegrid", font_scale=1.1, rc={
    "axes.facecolor": "white",
    "figure.facecolor": "white",
    "axes.edgecolor": "gray",
    "grid.color": "lightgray"
})

# Color choice
cmap = sns.diverging_palette(220, 20, as_cmap=True)

# visual
plt.figure(figsize=(9, 6))
ax = sns.heatmap(
    df_skills,
    annot=True,
    fmt=".0f",
    cmap=cmap,
    linewidths=0.7,
    cbar_kws={'label': 'Skill Level'},
    square=True
)

# Title
plt.title("Team Skill Levels Heatmap", fontsize=15, weight="bold", pad=20)
plt.xlabel("Skill Domain", fontsize=12)
plt.ylabel("Team Member", fontsize=12)

# layout
plt.xticks(rotation=30, ha="right")
plt.yticks(rotation=0)
plt.tight_layout()

#save
plt.savefig("figures/Skill_Gap_Analysis.png", dpi=300, bbox_inches="tight")
plt.show()
```
# Compare skill
```{python}
# Load raw job postings data
raw_df = pd.read_csv("data/cleaned_lightcast.csv")

# Drop irrelevant columns
columns_to_drop = [
    "ID", "URL", "ACTIVE_URLS", "DUPLICATES", "LAST_UPDATED_TIMESTAMP",
    "NAICS2", "NAICS3", "NAICS4", "NAICS5", "NAICS6",
    "SOC_2", "SOC_3", "SOC_5"
]
valid_cols_to_drop = [col for col in columns_to_drop if col in raw_df.columns]
raw_df.drop(columns=valid_cols_to_drop, inplace=True)

# Count keyword occurrences
top_skills = df_skills.columns.tolist()
job_text = raw_df["BODY"].fillna("")
skill_counts = {s: job_text.str.contains(s, case=False).sum() for s in top_skills}

# Append demand row
df_skills.loc["Market Demand"] = [skill_counts[s] for s in top_skills]
df_skills
```
```{python}
import matplotlib.pyplot as plt

# Team skill levels heatmap
plt.figure(figsize=(6,2))
plt.imshow(df_skills.iloc[:-1], aspect="auto")
plt.colorbar(label="Skill Level (1â€“5)")
plt.yticks(range(len(df_skills.index)-1), df_skills.index[:-1])
plt.xticks(range(len(df_skills.columns)), df_skills.columns, rotation=45, ha="right")
plt.title("Team Skill Levels")
plt.tight_layout()
plt.savefig("figures/Skill Gap Analysis.png", dpi=300, bbox_inches="tight")
plt.show()

# Market demand heatmap
plt.figure(figsize=(6,2))
plt.imshow([df_skills.loc["Market Demand"]], aspect="auto")
plt.colorbar(label="Market Demand Count")
plt.yticks([0], ["Market Demand"])
plt.xticks(range(len(df_skills.columns)), df_skills.columns, rotation=45, ha="right")
plt.title("Market Demand by Skill")
plt.tight_layout()
plt.show()
```


